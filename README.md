# FlatNas

[![GitHub](https://img.shields.io/badge/GitHub-FlatNas-181717?style=flat&logo=github&logoColor=white)](https://github.com/Garry-QD/FlatNas)
[![Docker Image](https://img.shields.io/badge/Docker-qdnas%2Fflatnas-2496ED?style=flat&logo=docker&logoColor=white)](https://hub.docker.com/r/qdnas/flatnas)

FlatNas æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜åº¦å¯å®šåˆ¶çš„ä¸ªäººå¯¼èˆªé¡µä¸ä»ªè¡¨ç›˜ç³»ç»Ÿã€‚å®ƒåŸºäº Vue 3 å’Œ Express æ„å»ºï¼Œæ—¨åœ¨ä¸º NAS ç”¨æˆ·ã€æå®¢å’Œå¼€å‘è€…æä¾›ä¸€ä¸ªä¼˜é›…çš„æµè§ˆå™¨èµ·å§‹é¡µã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

![alt text](1.png) ![alt text](2.png) ![alt text](3.png)

### ğŸ–¥ï¸ ä»ªè¡¨ç›˜ä¸å¸ƒå±€

- **ç½‘æ ¼å¸ƒå±€**: è‡ªç”±æ‹–æ‹½å¸ƒå±€ï¼Œæ”¯æŒä¸åŒå°ºå¯¸çš„ç»„ä»¶ã€‚
- **åˆ†ç»„ç®¡ç†**: æ”¯æŒåˆ›å»ºå¤šä¸ªåˆ†ç»„ï¼Œåˆ†ç±»ç®¡ç†åº”ç”¨å’Œä¹¦ç­¾ã€‚
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®ã€‚
- **ç¼–è¾‘æ¨¡å¼**: ç›´è§‚çš„æ‰€è§å³æ‰€å¾—ç¼–è¾‘ä½“éªŒï¼Œè½»æ¾æ·»åŠ ã€åˆ é™¤å’Œé‡æ–°æ’åˆ—ç»„ä»¶ã€‚

### ğŸ§© ä¸°å¯Œçš„å°ç»„ä»¶

FlatNas å†…ç½®äº†å¤šç§å®ç”¨çš„å°ç»„ä»¶ï¼Œæ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼š

- **ä¹¦ç­¾ç»„ä»¶**: å¿«é€Ÿè®¿é—®å¸¸ç”¨ç½‘ç«™ï¼Œæ”¯æŒè‡ªå®šä¹‰å›¾æ ‡ã€‚é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¡«å……å¸¸ç”¨çš„ 10 ä¸ªç½‘ç«™ï¼ˆå¦‚ GitHub, Bilibili ç­‰ï¼‰ã€‚
- **æ—¶é’Ÿä¸å¤©æ°”**: å®æ—¶æ˜¾ç¤ºå½“å‰æ—¶é—´ã€æ—¥æœŸåŠå½“åœ°å¤©æ°”æƒ…å†µã€‚
- **å¾…åŠäº‹é¡¹ (Todo)**: ç®€å•çš„ä»»åŠ¡ç®¡ç†ï¼Œéšæ—¶è®°å½•çµæ„Ÿå’Œå¾…åŠã€‚
- **RSS è®¢é˜…**: å†…ç½® RSS é˜…è¯»å™¨ï¼Œå®æ—¶è·å–è®¢é˜…æºçš„æœ€æ–°å†…å®¹ã€‚
- **çƒ­æœæ¦œå•**: é›†æˆå¾®åšçƒ­æœã€æ–°é—»çƒ­æ¦œç­‰ï¼Œä¸é”™è¿‡å³æ—¶çƒ­ç‚¹ã€‚
- **è®¡ç®—å™¨**: éšæ—¶å¯ç”¨çš„ç®€æ˜“è®¡ç®—å™¨ã€‚
- **éŸ³ä¹æ’­æ”¾å™¨**: å†…ç½® MiniPlayerï¼Œæ”¯æŒæ’­æ”¾æœåŠ¡å™¨ç«¯çš„æœ¬åœ°éŸ³ä¹æ–‡ä»¶ã€‚

### ğŸ¨ ä¸ªæ€§åŒ–å®šåˆ¶

- **å›¾æ ‡ç®¡ç†**: å†…ç½®å›¾æ ‡åº“ï¼Œå¹¶æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰å›¾ç‰‡ä½œä¸ºå›¾æ ‡ã€‚
- **èƒŒæ™¯è®¾ç½®**: æ”¯æŒè‡ªå®šä¹‰å£çº¸ã€‚
- **æ•°æ®å®‰å…¨**:
  - æœ¬åœ°å­˜å‚¨é…ç½® (`server/data/data.json`)ï¼Œæ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ã€‚
  - ç®€å•çš„å¯†ç è®¿é—®ä¿æŠ¤ï¼ˆé»˜è®¤å¯†ç ï¼š`admin`ï¼‰ï¼Œä¿æŠ¤éšç§é…ç½®ã€‚
- **CGI æ‰©å±•**: æ”¯æŒé€šè¿‡ Node.js ç¼–å†™ CGI è„šæœ¬æ‰©å±•åç«¯åŠŸèƒ½ï¼ˆä½äº `server/cgi-bin`ï¼‰ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
FlatNas/
â”œâ”€â”€ src/                # å‰ç«¯ Vue æºç 
â”œâ”€â”€ server/             # åç«¯ Express æœåŠ¡
â”‚   â”œâ”€â”€ data/           # [é‡è¦] ç”¨æˆ·æ•°æ®å­˜å‚¨ (data.json)
â”‚   â”œâ”€â”€ music/          # [é‡è¦] éŸ³ä¹æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ cgi-bin/        # CGI è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ server.js       # åç«¯å…¥å£
â”œâ”€â”€ public/             # é™æ€èµ„æº (å›¾æ ‡ç­‰)
â”œâ”€â”€ dist/               # æ„å»ºäº§ç‰©
â””â”€â”€ ...
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **ç¯å¢ƒè¦æ±‚**: Node.js ^20.19.0 || >=22.12.0
- **å‰ç«¯**: Vue 3, Vite, TypeScript, TailwindCSS, Pinia
- **åç«¯**: Node.js, Express
- **æ•°æ®å­˜å‚¨**: JSON æ–‡ä»¶å­˜å‚¨ (æ— éœ€é…ç½®æ•°æ®åº“)
- **å…¶ä»–**: RSS Parser, Vue Draggable Plus

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <your-repo-url>
   cd FlatNas
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   ```

3. **å¯åŠ¨é¡¹ç›®**
   è¯¥å‘½ä»¤ä¼šåŒæ—¶å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨å’Œåç«¯ API æœåŠ¡ï¼š

   ```bash
   npm start
   ```

   - å‰ç«¯åœ°å€: `http://localhost:5173`
   - åç«¯åœ°å€: `http://localhost:3000`

### éƒ¨ç½²æ„å»º

1. **æ„å»ºå‰ç«¯**

   ```bash
   npm run build
   ```

   æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•ä¸‹ã€‚

2. **è¿è¡Œç”Ÿäº§æœåŠ¡**
   ```bash
   npm run server
   ```
   æ­¤æ—¶å¯ä»¥é€šè¿‡ `http://localhost:3000` è®¿é—®å®Œæ•´åº”ç”¨ï¼ˆåç«¯ä¼šæ‰˜ç®¡ `dist` ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶ï¼‰ã€‚

## ğŸ³ Docker éƒ¨ç½²

é¡¹ç›®åŒ…å« `Dockerfile`ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ã€‚

1. **æ„å»ºé•œåƒ**

   ```bash
   docker build -t flatnas .
   ```

2. **è¿è¡Œå®¹å™¨**

   ```bash
   docker run -d \
     -p 3000:3000 \
     -v $(pwd)/server/data:/app/server/data \
     -v $(pwd)/server/music:/app/server/music \
     --name flatnas \
     flatnas
   ```

   > **æ³¨æ„**: å»ºè®®æŒ‚è½½ `data` å’Œ `music` ç›®å½•ï¼Œä»¥ç¡®ä¿é…ç½®æ•°æ®å’ŒéŸ³ä¹æ–‡ä»¶åœ¨å®¹å™¨é‡å¯åä¸ä¼šä¸¢å¤±ã€‚

3. **docker-compose**

   ```bash
   version: '3.8'

   services:
     flatnas:
       image: qdnas/flatnas:latest
       container_name: flatnas
       restart: unless-stopped
       ports:
         - '23000:3000'
       volumes:
         - ./data:/app/server/data #æŒ‡å®šè·¯å¾„ä¸‹æ–°å»ºdata
         - ./music:/app/server/music #æ˜ å°„æ’­æ”¾å™¨è·¯å¾„
   ```

## ğŸš€ ä¸€é”®éƒ¨ç½² (Debian)

å¦‚æœæ‚¨ä½¿ç”¨ Debian ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„è‡ªåŠ¨åŒ–è„šæœ¬è¿›è¡Œæ—  Docker éƒ¨ç½²ã€‚
è¯¦ç»†æŒ‡å—è¯·å‚è€ƒï¼š[ä¸€é”®éƒ¨ç½²æ–‡æ¡£](README_DEPLOY.md)

```bash
# å¿«é€Ÿå¼€å§‹
git clone https://github.com/Garry-QD/FlatNas.git
cd FlatNas
chmod +x deploy.sh
sudo ./deploy.sh install
```

## âš™ï¸ é…ç½®è¯´æ˜

- **é»˜è®¤å¯†ç **: ç³»ç»Ÿåˆå§‹å¯†ç ä¸º `admin`ï¼Œè¯·ç™»å½•ååœ¨è®¾ç½®ä¸­åŠæ—¶ä¿®æ”¹ã€‚
- **æ•°æ®æ–‡ä»¶**: æ‰€æœ‰é…ç½®ï¼ˆå¸ƒå±€ã€ç»„ä»¶ã€ä¹¦ç­¾ç­‰ï¼‰å‡å­˜å‚¨åœ¨ `server/data/data.json` ä¸­ã€‚
- **éŸ³ä¹æ–‡ä»¶**: å°† MP3 æ–‡ä»¶æ”¾å…¥ `server/music` ç›®å½•ï¼Œåˆ·æ–°é¡µé¢åå³å¯åœ¨æ’­æ”¾å™¨ä¸­çœ‹åˆ°ã€‚
- **CGI è„šæœ¬**: å°†è‡ªå®šä¹‰è„šæœ¬æ”¾å…¥ `server/cgi-bin` ç›®å½•ï¼Œå¯é€šè¿‡ `/cgi-bin/script.cgi` è®¿é—®ã€‚

## ğŸ“ å¾…åŠäº‹é¡¹ / è®¡åˆ’

- [ ] å¢åŠ æ›´å¤šç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯äº¤äº’ä½“éªŒ
- [ ] æ”¯æŒå¤šç”¨æˆ·ç³»ç»Ÿ
- [ ] åœ¨çº¿æ›´æ¢å£çº¸åº“

---

Enjoy your FlatNas! ğŸš€
